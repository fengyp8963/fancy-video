var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t;import{d as n,c as i,r as u,y as c,z as f,o as d,a as p,b as m,e as v,i as b,u as g,j as h,n as y,f as w,h as k,k as x,l as _,t as S,q as j,s as z,F as O,v as C}from"./index-91d68f6f.js";import{c as D,u as T,t as P,b as I,d as $,e as E,o as q,a as B,g as F,r as N}from"./tm-sheet.70d6c073.js";import{t as A,_ as G,a as H}from"./tm-button.a3c07927.js";const J=n({__name:"tm-spin",props:(K=((e,l)=>{for(var a in l||(l={}))o.call(l,a)&&s(e,a,l[a]);if(t)for(var a of t(l))r.call(l,a)&&s(e,a,l[a]);return e})({},D),L={followTheme:{type:[Boolean,String],default:!0},color:{type:String,default:"primary"},icon:{type:String,default:"tmicon-shuaxin"},size:{type:Number,default:46},bgColor:{type:String,default:"rgba(255,255,255,0.9)"},tip:{type:[String],defalut:""},load:{type:[Boolean,String],default:!1}},l(K,a(L))),emits:["click"],setup(e,{emit:l}){var a;const t=e,o=T();null==(a=x())||a.proxy;const r=i((()=>o.tmStore)),s=i((()=>I(t))),n=i((()=>$(t))),S=i((()=>E(t,r.value))),j=u(!0);j.value=!1;const z=u([0,0]),O=i((()=>S.value?"rgba(0,0,0,0.9)":t.bgColor)),C=i((()=>t.load)),D=i((()=>t.color));function q(e){l("click",e)}return c((()=>{})),f((()=>{})),(e,l)=>{const a=_;return d(),p(a,{ref:"tmspin",class:y([[g(n)],"flex relative flex-col"]),style:w([g(s)])},{default:m((()=>[v(a,{class:"relative zIndex-1"},{default:m((()=>[b(e.$slots,"default")])),_:3}),g(C)?(d(),p(a,{key:0,onClick:h(q,["stop"]),class:y(["absolute zIndex-10 flex-center blur",[j.value?"":" fulled-height   "]]),style:w([j.value?"":{width:"100%"},{backgroundColor:g(O)},j.value?{width:(z.value[0]||t.fontSize)+"px",height:(z.value[1]||t.fontSize)+"px"}:""])},{default:m((()=>[v(a,{userInteractionEnabled:!1,class:"pa-10 flex-col flex-col-center-center"},{default:m((()=>[v(A,{spin:"",fontSize:t.size,dark:g(S),color:g(D),followDark:e.followDark,followTheme:t.followTheme,name:t.icon},null,8,["fontSize","dark","color","followDark","followTheme","name"]),v(P,{followTheme:t.followTheme,dark:g(S),followDark:e.followDark,color:g(D),_class:"mt-16",label:t.tip},null,8,["followTheme","dark","followDark","color","label"])])),_:1})])),_:1},8,["onClick","class","style"])):k("v-if",!0)])),_:3},8,["class","style"])}}});var K,L;const M=n({__name:"index",setup(e){const l=u(!0),a=u(""),t=u({url:"https://dm.xbqgx.com?url=",param:""}),o=u([]);q((e=>{r(e)}));const r=e=>{uni.$tm.fetch.get("/api/api.php?out=json&flag="+e.flag+"&id="+e.id).then((e=>{var r,s,n;(null==(r=e.data)?void 0:r.success)&&(a.value=e.data.title,t.value.param=e.data.url,o.value=null==(n=null==(s=e.data)?void 0:s.info[0])?void 0:n.video.map((e=>({id:e.split("$")[0],url:e.split("$")[1],selected:!1}))),o.value[0].selected=!0,l.value=!1)})).catch((e=>{S({title:"查询失败，请稍后再试！",icon:"none",mask:!0,duration:1e3})}))};return(e,r)=>{const s=N(C("tm-text"),P),n=_;return d(),p(F,null,{default:m((()=>[v(J,{load:l.value,tip:"加载中",style:{"min-height":"200rpx"}},{default:m((()=>[v(B,{margin:[0,0],padding:[0,0]},{default:m((()=>[k(' <tm-image src="https://picsum.photos/620/150" :width="636" :height="150"></tm-image> '),t.value.param?(d(),j("iframe",{key:0,id:"iframe",src:t.value.url+t.value.param,style:{border:"none"},frameborder:"0",scrolling:"no"},null,8,["src"])):k("v-if",!0)])),_:1}),v(B,{margin:[0,0,0,0]},{default:m((()=>[v(s,{"font-size":24,_class:"text-weight-b",label:a.value},null,8,["label"]),v(G,{border:0,margin:[6,6]}),v(n,{class:"flex flex-row flex-wrap"},{default:m((()=>[(d(!0),j(O,null,z(o.value,(e=>(d(),p(n,{key:e.id},{default:m((()=>[v(H,{color:e.selected?"blue":"pink",margin:[10],shadow:0,size:"small",label:e.id,onClick:l=>(e=>{o.value.forEach((e=>e.selected=!1)),e.selected=!0,t.value.param=e.url})(e)},null,8,["color","label","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["load"])])),_:1})}}});export{M as default};
