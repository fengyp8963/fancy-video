import{d as a,r as e,t as l,o as t,a as s,b as i,e as r,h as u,q as o,s as n,F as d,v as m,l as p}from"./index-bce17865.js";import{o as c,a as f,g as v,r as h,t as g}from"./tm-sheet.30608b8b.js";import{_,b,a as x}from"./tm-spin.vue_vue_type_script_setup_true_lang.0cc6d5b1.js";const k=a({__name:"index",setup(a){const k=e(!0),w=e(""),y=e({url:"https://dm.xbqgx.com?url=",param:""}),j=e([]);c((a=>{$(a)}));const $=a=>{uni.$tm.fetch.get("/api1/api.php?out=json&flag="+a.flag+"&id="+a.id).then((a=>{var e,l,t;(null==(e=a.data)?void 0:e.success)&&(w.value=a.data.title,y.value.param=a.data.url,j.value=null==(t=null==(l=a.data)?void 0:l.info[0])?void 0:t.video.map((a=>({id:a.split("$")[0],url:a.split("$")[1],selected:!1}))),j.value[0].selected=!0,k.value=!1)})).catch((a=>{l({title:"查询失败，请稍后再试！",icon:"none",mask:!0,duration:1e3})}))};return(a,e)=>{const l=h(m("tm-text"),g),c=p;return t(),s(v,null,{default:i((()=>[r(b,{load:k.value,tip:"加载中",style:{"min-height":"200rpx"}},{default:i((()=>[r(f,{margin:[0,0],padding:[0,0]},{default:i((()=>[u(' <tm-image src="https://picsum.photos/620/150" :width="636" :height="150"></tm-image> '),y.value.param?(t(),o("iframe",{key:0,id:"iframe",src:y.value.url+y.value.param,style:{border:"none","min-height":"400rpx"},frameborder:"0",scrolling:"no"},null,8,["src"])):u("v-if",!0)])),_:1}),r(f,{margin:[0,0,0,0]},{default:i((()=>[r(l,{"font-size":24,_class:"text-weight-b",label:w.value},null,8,["label"]),r(_,{border:0,margin:[6,6]}),r(c,{class:"flex flex-row flex-wrap"},{default:i((()=>[(t(!0),o(d,null,n(j.value,(a=>(t(),s(c,{key:a.id},{default:i((()=>[r(x,{color:a.selected?"blue":"pink",margin:[10],shadow:0,size:"small",label:a.id,onClick:e=>(a=>{j.value.forEach((a=>a.selected=!1)),a.selected=!0,y.value.param=a.url})(a)},null,8,["color","label","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["load"])])),_:1})}}});export{k as default};
