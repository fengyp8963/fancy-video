var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,i=(e,l)=>{for(var a in l||(l={}))o.call(l,a)&&n(e,a,l[a]);if(t)for(var a of t(l))r.call(l,a)&&n(e,a,l[a]);return e},s=(e,t)=>l(e,a(t));import{d as u,r as d,g as f,c,w as p,o as y,a as h,b as m,e as g,n as b,u as x,f as v,h as S,i as w,j as _,k,l as C,I as z,m as B,p as $,_ as j,q as N,s as P,F as H,t as K,v as O,x as E}from"./index-c07b835d.js";import{t as I,a as T,_ as L,b as F}from"./tm-spin.vue_vue_type_script_setup_true_lang.fa2c03cd.js";import{c as V,u as D,t as A,a as W,b as q,d as G,e as J,f as M,g as Q,r as R}from"./tm-sheet.ce81a40a.js";const U=j(u({__name:"tm-input",props:s(i({},V),{followTheme:{type:[Boolean,String],default:!0},color:{type:String,default:"grey-4"},searchFontColor:{type:String,default:""},searchWidth:{type:Number,default:0},prefixColor:{type:String,default:""},suffixColor:{type:String,default:""},focusColor:{type:String,default:"primary"},fontColor:{type:String,default:""},text:{type:Boolean,default:!0},outlined:{type:Boolean,default:!1},border:{type:Number,default:0},transprent:{type:Boolean,default:!1},round:{type:Number,default:3},shadow:{type:Number,default:0},margin:{type:Array,default:()=>[0,0]},padding:{type:Array,default:()=>[0,0]},height:{type:Number,default:64},prefix:{type:String,default:""},prefixLabel:{type:String,default:""},suffix:{type:String,default:""},suffixLabel:{type:String,default:""},fontSize:{type:Number,default:30},search:{type:String,default:""},searchLabel:{type:String,default:""},showClear:{type:Boolean,default:!1},password:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入内容"},errorLabel:{type:String,default:"请输入内容"},align:{type:String,default:"left"},modelValue:{type:[String,Number],default:""},inputPadding:{type:Array,default:()=>[24,0]},showCharNumber:{type:Boolean,default:!1},maxlength:{type:Number,default:-1},type:{type:String,default:"text"},cursorSpacing:{type:Number,default:24},confirmType:{type:String,default:"done"},confirmHold:{type:Boolean,default:!1},autoBlur:{type:Boolean,default:!0},holdKeyboard:{type:Boolean,default:!1},adjustPosition:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},cursor:{type:Number,default:0},showConfirmBar:{type:Boolean,default:!0},selectionStart:{type:Number,default:-1},selectionEnd:{type:Number,default:-1},disableDefaultPadding:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},placeholderStyle:{type:String,default:""},autoHeight:{type:Boolean,default:!1},readyOnly:{type:Boolean,default:!1},layoutAlign:{type:String,default:"flex-row-top-start"}}),emits:["focus","blur","confirm","input","update:modelValue","clear","search","keyboardheightchange","click"],setup(e,{emit:l}){var a,t,o;const r=e,n=D(),u=null!=(t=null==(a=k())?void 0:a.proxy)?t:null;let j=null==u?void 0:u.$parent;for(;j&&"tmFormComnameFormItem"!=(null==j?void 0:j.tmFormComnameFormItem)&&j;)j=null!=(o=null==j?void 0:j.$parent)?o:void 0;const N=d(!1);N.value="android"==f().osName;const P=c((()=>r.height)),H=c((()=>""!==r.search||""!==r.searchLabel?[4,0]:r.inputPadding));let K=NaN;function O(e,l=500,a=!1){if(isNaN(K)||clearTimeout(K),a){var t=!K;K=setTimeout((()=>{K=NaN}),l),t&&"function"==typeof e&&e()}else K=setTimeout((()=>{"function"==typeof e&&e(),K=NaN}),l)}const E=c((()=>s(i({},r),{fontSize_px:$(r.fontSize)})));r.modelValue;const L=c((()=>n.tmStore));c((()=>q(r))),c((()=>G(r)));const F=c((()=>J(r,L.value))),V=d(!1),Q=d(r.focus||!1);p((()=>r.focus),(()=>{Q.value=r.focus}));const R=c((()=>{let e=r.color;return Q.value&&(e=r.followTheme&&n.tmStore.color?n.tmStore.color:r.focusColor),V.value&&(e="red"),e})),U=c((()=>{const e=s(i({},r),{color:R.value});return M(e,F.value,L.value)})),X=d(E.value.password),Y=c((()=>r.password));d(r.errorLabel);const Z=d(r.modelValue),ee=c((()=>String(Z.value).split("").length));function le(){l("search",Z.value)}function ae(){Z.value="",l("update:modelValue",""),l("clear")}function te(){X.value=!X.value}function oe(e){Q.value=!0,l("focus",e)}function re(e){Q.value=!1,l("blur",e)}function ne(){l("confirm",Z.value)}function ie(e){return Z.value=e.detail.value,l("input",e.detail.value),l("update:modelValue",e.detail.value),e.detail.value}function se(e,a){O("ali"!=a?()=>l("click",e):()=>{l("click",e)},200,!0)}return p((()=>r.modelValue),(()=>Z.value=r.modelValue)),(e,a)=>{const t=C,o=z,n=B;return y(),h(W,{eventPenetrationEnabled:!0,transprent:!0,margin:r.margin,padding:r.padding},{default:m((()=>[g(W,{transprent:r.transprent,round:r.round,"no-level":"",margin:[0,0],padding:x(H),border:r.border,text:r.text,color:x(R),outlined:r.outlined,shadow:r.shadow,linear:r.linear,linearDeep:r.linearDeep,_style:"transition:border 0.24s"},{default:m((()=>[g(t,{class:b(["flex flex-row relative",["textarea"==x(E).type?x(E).layoutAlign:"flex-row-center-start"]]),onClick:a[7]||(a[7]=e=>se(e,"")),style:v([x(E).autoHeight&&"textarea"==x(E).type?{}:{height:`${x(P)}rpx`}])},{default:m((()=>[x(E).search||x(E).searchLabel?(y(),h(t,{key:0,class:"px-9"})):S("v-if",!0),w(e.$slots,"left",{},void 0,!0),x(E).prefix?(y(),h(t,{key:1,class:"pr-16"},{default:m((()=>[g(I,{_style:"transition:color 0.24s","font-size":x(E).fontSize,color:r.prefixColor,name:x(E).prefix},null,8,["font-size","color","name"])])),_:1})):S("v-if",!0),x(E).prefixLabel?(y(),h(t,{key:2,class:"pr-24"},{default:m((()=>[g(A,{_style:"transition:color 0.24s","font-size":x(E).fontSize,color:r.prefixColor,label:x(E).prefixLabel},null,8,["font-size","color","label"])])),_:1})):S("v-if",!0),N.value?S("v-if",!0):(y(),h(t,{key:3,onClick:a[2]||(a[2]=e=>se(e,"ali")),class:"flex-1 relative flex-row flex",style:v([{width:"0px"}])},{default:m((()=>[S(' <view @click.stop="emits(\'click\',$event)" class=" l-0 t-0 flex-1 " :style="{height: `${_height}rpx`,background:\'red\'}"></view> '),"textarea"!=x(E).type?(y(),h(o,{key:0,class:"flex-1",userInteractionEnabled:!1,value:Z.value,focus:x(E).focus,onFocus:oe,onBlur:re,onConfirm:ne,onInput:ie,onKeyboardheightchange:a[0]||(a[0]=e=>l("keyboardheightchange",e)),password:X.value,maxlength:x(E).maxlength,disabled:x(E).disabled,cursorSpacing:x(E).cursorSpacing,confirmType:x(E).confirmType,confirmHold:x(E).confirmHold,autoBlur:x(E).autoBlur,holdKeyboard:x(E).holdKeyboard,adjustPosition:x(E).adjustPosition,readonly:x(E).readyOnly,type:x(E).type,placeholder:x(E).placeholder,style:v([{height:`${x(P)}rpx`,color:x(E).fontColor?x(E).fontColor:x(U).textColor,"text-align":r.align,fontSize:`${x(E).fontSize_px}px`,transition:"color 0.24s"}]),"placeholder-style":`fontSize:${x(E).fontSize_px}px;${r.placeholderStyle}`,"ready-only":x(E).readyOnly},null,8,["value","focus","password","maxlength","disabled","cursorSpacing","confirmType","confirmHold","autoBlur","holdKeyboard","adjustPosition","readonly","type","placeholder","style","placeholder-style","ready-only"])):S("v-if",!0),"textarea"==x(E).type?(y(),h(n,{key:1,userInteractionEnabled:!1,value:Z.value,focus:x(E).focus,onFocus:oe,onBlur:re,onConfirm:ne,onInput:ie,onKeyboardheightchange:a[1]||(a[1]=e=>l("keyboardheightchange",e)),maxlength:x(E).maxlength,disabled:x(E).disabled,placeholder:x(E).placeholder,cursorSpacing:x(E).cursorSpacing,confirmHold:x(E).confirmHold,autoBlur:x(E).autoBlur,holdKeyboard:x(E).holdKeyboard,cursor:x(E).cursor,"show-confirm-bar":x(E).showConfirmBar,selectionStart:x(E).selectionStart,selectionEnd:x(E).selectionEnd,"disable-default-padding":x(E).disableDefaultPadding,fixed:x(E).fixed,autoHeight:x(E).autoHeight,readonly:x(E).readyOnly,adjustPosition:x(E).adjustPosition,type:x(E).type,style:v([x(E).autoHeight?{}:{height:`${x(P)}rpx`},{width:"auto","word-break":"break-word",color:x(E).fontColor?x(E).fontColor:x(U).textColor,"text-align":r.align,fontSize:`${x(E).fontSize_px}px`,transition:"color 0.24s"}]),class:"wrap flex-1","placeholder-style":`fontSize:${x(E).fontSize_px}px;${r.placeholderStyle}`,"ready-only":x(E).readyOnly},null,8,["value","focus","maxlength","disabled","placeholder","cursorSpacing","confirmHold","autoBlur","holdKeyboard","cursor","show-confirm-bar","selectionStart","selectionEnd","disable-default-padding","fixed","autoHeight","readonly","adjustPosition","type","style","placeholder-style","ready-only"])):S("v-if",!0)])),_:1})),N.value?(y(),h(t,{key:4,class:"flex-1 relative flex-row flex",style:v([{width:"0px"}])},{default:m((()=>[S(' <view @click.stop="emits(\'click\',$event)" class=" l-0 t-0 flex-1 " :style="{height: `${_height}rpx`,background:\'red\'}"></view> '),"textarea"!=x(E).type?(y(),h(o,{key:0,class:"flex-1",onClick:a[3]||(a[3]=_((e=>l("click",e)),["stop"])),userInteractionEnabled:!1,value:Z.value,focus:x(E).focus,onFocus:oe,onBlur:re,onConfirm:ne,onInput:ie,onKeyboardheightchange:a[4]||(a[4]=e=>l("keyboardheightchange",e)),password:X.value,disabled:x(E).disabled,cursorSpacing:x(E).cursorSpacing,confirmType:x(E).confirmType,confirmHold:x(E).confirmHold,autoBlur:x(E).autoBlur,holdKeyboard:x(E).holdKeyboard,adjustPosition:x(E).adjustPosition,maxlength:x(E).maxlength,type:x(E).type,readonly:x(E).readyOnly,placeholder:x(E).placeholder,style:v([{height:`${x(P)}rpx`,color:x(E).fontColor?x(E).fontColor:x(U).textColor,"text-align":r.align,fontSize:`${x(E).fontSize_px}px`}]),"placeholder-style":`fontSize:${x(E).fontSize_px}px;${r.placeholderStyle}`},null,8,["value","focus","password","disabled","cursorSpacing","confirmType","confirmHold","autoBlur","holdKeyboard","adjustPosition","maxlength","type","readonly","placeholder","style","placeholder-style"])):S("v-if",!0),"textarea"==x(E).type?(y(),h(n,{key:1,onClick:a[5]||(a[5]=_((e=>l("click",e)),["stop"])),userInteractionEnabled:!1,value:Z.value,focus:x(E).focus,onFocus:oe,onBlur:re,onConfirm:ne,onInput:ie,onKeyboardheightchange:a[6]||(a[6]=e=>l("keyboardheightchange",e)),disabled:x(E).disabled,placeholder:x(E).placeholder,cursorSpacing:x(E).cursorSpacing,confirmHold:x(E).confirmHold,autoBlur:x(E).autoBlur,holdKeyboard:x(E).holdKeyboard,adjustPosition:x(E).adjustPosition,maxlength:x(E).maxlength,autoHeight:x(E).autoHeight,cursor:x(E).cursor,"show-confirm-bar":x(E).showConfirmBar,selectionStart:x(E).selectionStart,selectionEnd:x(E).selectionEnd,"disable-default-padding":x(E).disableDefaultPadding,readonly:x(E).readyOnly,fixed:x(E).fixed,type:x(E).type,style:v([x(E).autoHeight?{}:{height:`${x(P)}rpx`},{width:"auto","word-break":"break-word",color:x(E).fontColor?x(E).fontColor:x(U).textColor,"text-align":r.align,fontSize:`${x(E).fontSize_px}px`}]),class:"wrap flex-1","placeholder-style":`fontSize:${x(E).fontSize_px}px;${r.placeholderStyle}`},null,8,["value","focus","disabled","placeholder","cursorSpacing","confirmHold","autoBlur","holdKeyboard","adjustPosition","maxlength","autoHeight","cursor","show-confirm-bar","selectionStart","selectionEnd","disable-default-padding","readonly","fixed","type","style","placeholder-style"])):S("v-if",!0)])),_:1})):S("v-if",!0),x(E).showClear&&x(ee)>0?(y(),h(t,{key:5,onClick:ae,class:"pl-16"},{default:m((()=>[g(I,{_style:"transition:color 0.24s",userInteractionEnabled:!1,"font-size":x(E).fontSize,name:"tmicon-times-circle-fill"},null,8,["font-size"])])),_:1})):S("v-if",!0),V.value?(y(),h(t,{key:6,class:"pl-16"},{default:m((()=>[g(I,{_style:"transition:color 0.24s","font-size":x(E).fontSize,name:"tmicon-exclamation-circle"},null,8,["font-size"])])),_:1})):S("v-if",!0),x(E).suffix?(y(),h(t,{key:7,class:"pl-16"},{default:m((()=>[g(I,{_style:"transition:color 0.24s","font-size":x(E).fontSize,color:r.suffixColor,name:x(E).suffix},null,8,["font-size","color","name"])])),_:1})):S("v-if",!0),x(E).suffixLabel?(y(),h(t,{key:8,class:"pl-16"},{default:m((()=>[g(A,{_style:"transition:color 0.24s","font-size":x(E).fontSize,color:r.suffixColor,label:x(E).suffixLabel},null,8,["font-size","color","label"])])),_:1})):S("v-if",!0),x(Y)?(y(),h(t,{key:9,onClick:te,class:"pl-16"},{default:m((()=>[S(" tmicon-eyeslash-fill "),g(I,{_style:"transition:color 0.24s",userInteractionEnabled:!1,"font-size":x(E).fontSize,name:X.value?"tmicon-eyeslash-fill":"tmicon-eye-fill"},null,8,["font-size","name"])])),_:1})):S("v-if",!0),x(E).showCharNumber&&x(ee)>0&&"textarea"!=x(E).type?(y(),h(t,{key:10,class:"pl-16 flex-row flex"},{default:m((()=>[g(A,{_style:"transition:color 0.24s",label:x(ee)},null,8,["label"]),x(E).maxlength>0?(y(),h(A,{key:0,_style:"transition:color 0.24s",label:"/"+x(E).maxlength},null,8,["label"])):S("v-if",!0)])),_:1})):S("v-if",!0),S(" 原因是支付宝小程序自带了计数器。会导致重叠。 "),x(E).showCharNumber&&x(ee)>0&&"textarea"==x(E).type?(y(),h(t,{key:11,class:b(["pl-16 flex-row flex absolute r-0",["b-12"]])},{default:m((()=>[g(A,{_style:"transition:color 0.24s",label:x(ee)},null,8,["label"]),x(E).maxlength>0?(y(),h(A,{key:0,_style:"transition:color 0.24s",label:"/"+x(E).maxlength},null,8,["label"])):S("v-if",!0)])),_:1})):S("v-if",!0),w(e.$slots,"right",{},(()=>[x(E).search||x(E).searchLabel?(y(),h(t,{key:0,class:"pl-16"},{default:m((()=>[g(T,{width:r.searchWidth,followTheme:r.followTheme,onClick:le,color:r.focusColor,"font-size":24,height:x(P)-11,padding:[16,0],block:!r.searchWidth,margin:[0,0],fontColor:r.searchFontColor,icon:x(E).search,label:x(E).searchLabel},null,8,["width","followTheme","color","height","block","fontColor","icon","label"])])),_:1})):S("v-if",!0)]),!0)])),_:3},8,["class","style"])])),_:3},8,["transprent","round","padding","border","text","color","outlined","shadow","linear","linearDeep"])])),_:3},8,["margin","padding"])}}}),[["__scopeId","data-v-15b3ffbb"]]),X=u({__name:"index",setup(e){const l=d(!0),a=d(!0),t=d([]),o=d([]),r=()=>{uni.$tm.fetch.get("http://api.fancy8963.cn/api2/api/v/").then((e=>{t.value=e.data.hot,o.value=e.data.new,a.value=!1,l.value=!0})).catch((e=>{K({title:"查询失败，请稍后再试！",icon:"none",mask:!0,duration:1e3}),a.value=!1}))};r();const n=d([]),i=e=>{a.value=!0,e?uni.$tm.fetch.get("http://api.fancy8963.cn/api1/api.php?out=json&wd="+e).then((e=>{var t,o;console.log(e),(null==(t=e.data)?void 0:t.success)&&(n.value=null==(o=e.data)?void 0:o.info,l.value=!1),a.value=!1})).catch((e=>{K({title:"查询失败，请稍后再试！",icon:"none",mask:!0,duration:1e3}),a.value=!1})):r()};return(e,r)=>{const s=R(O("tm-divider"),L),u=R(O("tm-button"),T),d=C,f=R(O("tm-spin"),F);return y(),h(Q,null,{default:m((()=>[g(W,{margin:[0,0,0,0]},{default:m((()=>[g(U,{searchWidth:120,placeholder:"请输入内容",onSearch:i,prefix:"tmicon-search",searchLabel:"搜索"})])),_:1}),g(s,{border:0,margin:[12,12]}),l.value?(y(),h(d,{key:0},{default:m((()=>[g(f,{load:a.value,tip:"加载中",style:{"min-height":"200rpx"}},{default:m((()=>[g(W,{margin:[0,0,0,0]},{default:m((()=>[g(A,{_class:"text-overflow-1",label:"热门"})])),_:1}),g(s,{border:0,margin:[12,12]}),g(d,{class:"flex flex-row flex-wrap"},{default:m((()=>[(y(!0),N(H,null,P(t.value,((e,l)=>(y(),h(d,{key:l},{default:m((()=>[g(u,{color:"blue",width:350,margin:[10],shadow:0,size:"small",label:e.name,onClick:l=>i(e.name)},null,8,["label","onClick"])])),_:2},1024)))),128))])),_:1}),g(s,{border:0,margin:[12,12]}),g(W,{margin:[0,0,0,0]},{default:m((()=>[g(A,{_class:"text-overflow-1",label:"最新"})])),_:1}),g(s,{border:0,margin:[12,12]}),g(d,{class:"flex flex-row flex-wrap"},{default:m((()=>[(y(!0),N(H,null,P(o.value,((e,l)=>(y(),h(d,{key:l},{default:m((()=>[g(u,{color:"blue",width:350,margin:[10],shadow:0,size:"small",label:e.name,onClick:l=>i(e.name)},null,8,["label","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["load"])])),_:1})):S("v-if",!0),l.value?S("v-if",!0):(y(),h(d,{key:1},{default:m((()=>[g(f,{load:a.value,tip:"加载中",style:{"min-height":"200rpx"}},{default:m((()=>[g(W,{margin:[0,0,0,0]},{default:m((()=>[g(A,{_class:"text-overflow-1",label:"查询"})])),_:1}),g(s,{border:0,margin:[12,12]}),g(d,{class:"flex flex-row flex-wrap"},{default:m((()=>[(y(!0),N(H,null,P(n.value,((e,l)=>(y(),h(d,{key:l},{default:m((()=>[g(u,{color:"blue",width:726,margin:[10],shadow:0,size:"small",label:e.title+" ["+e.type+"] ["+e.from+"]",onClick:l=>(e=>{E({url:`/pages/detail/index?id=${e.id}&flag=${e.flag}`})})(e)},null,8,["label","onClick"])])),_:2},1024)))),128))])),_:1})])),_:1},8,["load"])])),_:1})),g(s,{border:0,margin:[12,12]})])),_:1})}}});export{X as default};
